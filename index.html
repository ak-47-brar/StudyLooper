<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyLooper - Track Your Study Time</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-card">
                <h1 class="app-title">üìö StudyLooper</h1>
                <p class="subtitle">Track your study journey</p>
                <form id="loginForm">
                    <div class="input-group">
                        <label for="usernameInput">Enter Your Username</label>
                        <input type="text" id="usernameInput" placeholder="Your name" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-large">Start Studying</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="page">
        <header>
            <div class="header-content">
                <h1 class="app-title">üìö StudyLooper</h1>
                <div class="header-right">
                    <span id="usernameDisplay" class="username-badge"></span>
                    <div id="syncStatus" class="sync-badge">
                        <span class="sync-dot"></span>
                        <span class="sync-text">Synced</span>
                    </div>
                    <button id="logoutBtn" class="btn btn-danger">Logout</button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-page="timerPage">‚è±Ô∏è Timer</button>
            <button class="tab-btn" data-page="analyticsPage">üìä Analytics</button>
            <button class="tab-btn" data-page="syncPage">‚òÅÔ∏è Sync & Data</button>
        </nav>

        <!-- Timer Page -->
        <div id="timerPage" class="content-page active">
            <div class="container">
                <div class="card timer-card">
                    <h2>Study Timer</h2>
                    <div class="timer-display" id="timerDisplay">00:00:00</div>
                    <div class="timer-controls">
                        <button id="startBtn" class="btn btn-success">‚ñ∂ Start</button>
                        <button id="pauseBtn" class="btn btn-warning" disabled>‚è∏ Pause</button>
                        <button id="resumeBtn" class="btn btn-info" disabled style="display:none;">‚ñ∂ Resume</button>
                        <button id="stopBtn" class="btn btn-danger" disabled>‚èπ Stop & Save</button>
                    </div>
                    <div class="session-notes">
                        <label for="sessionNotes">Session Notes (optional)</label>
                        <textarea id="sessionNotes" placeholder="What did you study? (e.g., Math - Algebra, Science - Physics Chapter 3)"></textarea>
                    </div>
                </div>

                <!-- Today's Progress -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-content">
                            <div class="stat-value" id="todayTime">0h 0m</div>
                            <div class="stat-label">Today's Study Time</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-content">
                            <div class="stat-value" id="todaySessions">0</div>
                            <div class="stat-label">Sessions Today</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <div class="stat-value" id="currentStreak">0</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Page -->
        <div id="analyticsPage" class="content-page">
            <div class="container">
                <!-- Filter Buttons -->
                <div class="filter-buttons">
                    <button class="filter-btn active" data-days="7">Last 7 Days</button>
                    <button class="filter-btn" data-days="30">Last 30 Days</button>
                    <button class="filter-btn" data-days="all">All Time</button>
                </div>

                <!-- Overview Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalTime">0h 0m</div>
                            <div class="stat-label">Total Study Time</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalSessions">0</div>
                            <div class="stat-label">Total Sessions</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <div class="stat-value" id="avgTime">0 min</div>
                            <div class="stat-label">Average Per Day</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <div class="stat-value" id="streakCount">0</div>
                            <div class="stat-label">Current Streak</div>
                        </div>
                    </div>
                </div>

                <!-- Chart -->
                <div class="card">
                    <h2>Daily Study Time</h2>
                    <canvas id="studyChart"></canvas>
                </div>

                <!-- Continuity Calendar -->
                <div class="card">
                    <h2>Study Continuity (Last 42 Days)</h2>
                    <div id="continuityCalendar" class="continuity-calendar"></div>
                    <div class="calendar-legend">
                        <div class="legend-item"><span class="legend-box" style="background:#ef4444"></span> No study</div>
                        <div class="legend-item"><span class="legend-box" style="background:#93c5fd"></span> &lt;1h</div>
                        <div class="legend-item"><span class="legend-box" style="background:#3b82f6"></span> 1-2h</div>
                        <div class="legend-item"><span class="legend-box" style="background:#1e40af"></span> 2h+</div>
                    </div>
                </div>

                <!-- Recent Sessions -->
                <div class="card">
                    <h2>Recent Sessions (Last 20)</h2>
                    <div id="recentSessions" class="sessions-list"></div>
                </div>
            </div>
        </div>

        <!-- Sync & Data Page -->
        <div id="syncPage" class="content-page">
            <div class="container">
                <div class="card">
                    <h2>‚òÅÔ∏è Cloud Sync Status</h2>
                    <div class="sync-info">
                        <div id="lastSyncTime" class="sync-time">Last synced: Never</div>
                        <button id="manualSyncBtn" class="btn btn-primary">Sync Now</button>
                    </div>
                    <div class="sync-details">
                        <p>üì° Auto-sync every 30 seconds</p>
                        <p>üíæ LocalStorage backup enabled</p>
                        <p id="onlineStatus" class="status-online">üü¢ Online</p>
                    </div>
                </div>

                <div class="card">
                    <h2>üíæ Data Management</h2>
                    <div class="data-actions">
                        <div class="action-item">
                            <div>
                                <h3>Export Data</h3>
                                <p>Download all your study sessions as JSON</p>
                            </div>
                            <button id="exportBtn" class="btn btn-info">üì• Export</button>
                        </div>
                        <div class="action-item">
                            <div>
                                <h3>Import Data</h3>
                                <p>Upload previously exported session data</p>
                            </div>
                            <label class="btn btn-success" for="importFile">üì§ Import</label>
                            <input type="file" id="importFile" accept=".json" style="display:none;">
                        </div>
                        <div class="action-item">
                            <div>
                                <h3>Clear All Data</h3>
                                <p>Permanently delete all sessions (requires confirmation)</p>
                            </div>
                            <button id="clearBtn" class="btn btn-danger">üóëÔ∏è Clear All</button>
                        </div>
                    </div>
                </div>

                <!-- Database Configuration -->
                <div class="card">
                    <h2>üîß Database Configuration</h2>
                    <form id="dbConfigForm">
                        <div class="input-group">
                            <label for="dbUrl">Online Database URL (JSONBin, PasteBin, etc.)</label>
                            <input type="url" id="dbUrl" placeholder="https://api.jsonbin.io/v3/b/YOUR_BIN_ID" value="">
                            <small>Leave empty to use localStorage only</small>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Configuration</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>